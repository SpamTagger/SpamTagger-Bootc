# /*
#shellcheck disable=SC2174,SC2114
# */

set ${CI:+-x} -euo pipefail

setterm --foreground green
echo "########################"
echo "# Installing packages..."
echo "########################"
setterm --foreground default

setterm --foreground blue
echo "# Enabling Non-Free Repository..."
setterm --foreground default

sed -i 's/Components: main/Components: main non-free non-free-firmware/' /etc/apt/sources.list.d/debian.sources

setterm --foreground blue
echo "# Installing dependencies..."
setterm --foreground default

# /* 
# All application packages should be installed in the bootstrap install script
# for the relevant SpamTagger version.
# Here we will include essential OS packages (duplicated in the bootstrap
# install script) as well as some non-essential packages which will be useful or
# necessary in a BootC context, but which can be installed more selectively in
# a generic Debian installation */

apt-get update
apt install --assume-yes --no-install-recommends --no-install-suggests \
  apt-transport-https \
  apt-utils \
  ca-certificates \
  console-data \
  composer \
  cpanminus \
  cron \
  curl \
  debconf \
  distrobox \
  dnsutils \
  fdisk \
  firmware-amd-graphics \
  firmware-intel-graphics \
  firmware-linux \
  firmware-linux-free \
  firmware-linux-nonfree \
  firmware-nvidia-graphics \
  git \
  gpg \
  jq \
  kbd \
  lsb-release \
  lzma \
  open-vm-tools \
  podman \
  zstd
rm -rf /var/lib/apt/lists
mkdir /var/lib/apt/lists
apt-get clean -y
